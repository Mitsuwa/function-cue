# Generate git repo roots cue.mod

Generates function-cue's `cue.mod` using golang 1.20.  This is needed because the providers are built with 1.20 and cue cannot `cue get go` the providers that are built on older golang versions

The cue.mod generated stores a `versioned` set of cue files, the version specified is appended to the parent directory of where the original cue file is found.  This is implemented this way
because users may not all be on the same version of the provider.  Currently function-cue stores the latest `6` versions of the providers specified

### `providers.cue` file

The supported org _x_ providers _x_ version list is stored within the `providers.cue` file

`cue export providers.cue -o providers.json` is run during the docker build

### Go Generate

`go generate ./...`

### Building

`docker build -t function-cue-cuemod:latest .`

### Running the docker container

`docker run -it -v $(git rev-parse --show-toplevel):/app/out function-cue-cuemod:latest`

### Note

the go.mod within the gitroot is **not** the go.mod generated by this cue.mod, this is because these providers are not needed for function-cue, only the cue schemas

if the go.mod was included, a `go mod tidy` would remove them because they are not used in function-cue golang code

#### TODO

generate the providers.cue list off of the github api so that version tags are not hardcoded
